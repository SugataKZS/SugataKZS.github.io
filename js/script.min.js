function composedPath(e){let t=[];for(;e;){if(t.push(e),"HTML"===e.tagName)return t.push(document),t.push(window),t;e=e.parentElement}}class Main{constructor(){this.dpi=window.devicePixelRatio,this.w=+window.innerWidth*this.dpi,this.h=+window.innerHeight*this.dpi,this.panels,this.showPanel=!0,this.menuPanel=!0,this.cvs,this.ctx,this.move,this.resizeLines=this.resizeLines_=this.resizeParticles=this.resizeParticles_=!1,addEventListener("resize",()=>{this.resize()}),document.getElementById("color-lines").style=`background-image: linear-gradient(to right, ${settings.ciline.linesColor}1) 0%,  ${settings.ciline.linesColor}1) 100%), url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMElEQVQ4T2OcOXPmfwY84OzZs/ikGRhHDRgWYZCWloY3HRgbG+NPB6MGMDAO/TAAAN6LP+lFacGZAAAAAElFTkSuQmCC) !important;`,document.getElementById("min-max-lines").innerHTML=`min-${settings.ciline.minLineOpac} max-${settings.ciline.maxLineOpac}`,document.getElementById("resize-lines-min").style.width=`${100*settings.ciline.minLineOpac}vw`,document.getElementById("resize-lines-max").style.width=`${100*settings.ciline.minLineOpac}vw`,document.getElementById("min-max-particles").innerHTML=`min-${settings.ciline.minCircleOpac} max-${settings.ciline.maxCircleOpac}`,document.getElementById("resize-particles-min").style.width=`${10*settings.ciline.minCircleOpac}vw`,document.getElementById("resize-particles-max").style.width=`${10*settings.ciline.maxCircleOpac}vw`,document.getElementById("count-particles").placeholder=settings.ciline.count,document.getElementById("speed-particles").placeholder=settings.ciline.MaxVelocity,document.getElementById("radius-particles").placeholder=settings.ciline.radius,document.getElementById("width-lines").placeholder=settings.ciline.widthline}init(){this.panels=document.getElementsByClassName("panels"),this.status(),window.onclick=window.onmousedown=window.onmouseup=(e=>{this.events(e)}),setInterval(()=>{this.checkChange()},0)}resize(){this.dpi=window.devicePixelRatio,this.w=+window.innerWidth*this.dpi,this.h=+window.innerHeight*this.dpi}events(e){e.path||e.composedPath&&e.composedPath(e.target);let t=document.getElementById("opacity-lines-min"),i=document.getElementById("opacity-lines-max"),s=document.getElementById("opacity-particles-min"),n=document.getElementById("opacity-particles-max");switch(e.type){case"click":if(this.showPanel&&"panels btn-show-control"==e.target.className){this.panels[0].style.left="112%",this.panels[0].querySelector("p").innerHTML="open panel",this.showPanel=!this.showPanel;break}if(!this.showPanel&&"panels btn-show-control"==e.target.className){this.panels[0].style.left="85%",this.panels[0].querySelector("p").innerHTML="close panel",this.showPanel=!this.showPanel;break}if(this.menuPanel&&"panels btn-menu-control details"==e.target.className){this.panels[7].style.display="none",this.panels[8].style.display="block",this.menuPanel=!this.menuPanel;break}if(!this.menuPanel&&"panels btn-menu-control settings"==e.target.className){this.panels[8].style.display="none",this.panels[7].style.display="block",this.menuPanel=!this.menuPanel;break}if("theme"==e.target.id){settings.ciline.darkTheme=!settings.ciline.darkTheme,e.target.style.background=settings.ciline.darkTheme?"rgb(0,0,0)":"rgb(255,255,255)",e.target.style.border=settings.ciline.darkTheme?"0.1vw solid rgb(255, 255, 255)":"0.1vw solid rgb(0, 0, 0)";break}if("random-color-input"==e.target.id){settings.ciline.randomParticleColor=!settings.ciline.randomParticleColor;break}break;case"mouseup":if(this.resizeLines){this.resizeLines=!this.resizeLines,t.onmousemove=null;break}if(this.resizeLines_){this.resizeLines_=!this.resizeLines_,i.onmousemove=null;break}if(this.resizeParticles){this.resizeParticles=!this.resizeParticles,s.onmousemove=null;break}if(this.resizeParticles_){this.resizeParticles_=!this.resizeParticles_,n.onmousemove=null;break}break;case"mousedown":if("group-resize-lines-min"==e.target.className&&!this.resizeLines){this.resizeLines=!this.resizeLines;let e,i=0;t.onmousemove=(t=>{e=document.getElementById("resize-lines-min"),t.screenX!=i&&(t.screenX>i?parseFloat(e.style.width)<10&&(e.style.width=`${parseFloat(e.style.width)+.2}vw`,document.getElementById("min-max-lines").innerHTML=`min-${(parseFloat(e.style.width)/100).toFixed(2)} max-${settings.ciline.maxLineOpac}`,settings.ciline.minLineOpac=parseFloat((parseFloat(e.style.width)/100).toFixed(2))):parseFloat(e.style.width)>0&&(e.style.width=`${parseFloat(e.style.width)-.2}vw`,document.getElementById("min-max-lines").innerHTML=`min-${(parseFloat(e.style.width)/100).toFixed(2)} max-${settings.ciline.maxLineOpac}`,settings.ciline.minLineOpac=parseFloat((parseFloat(e.style.width)/100).toFixed(2)))),i=t.screenX});break}if("group-resize-lines-max"==e.target.className&&!this.resizeLines_){this.resizeLines_=!this.resizeLines_;let e,t=0;i.onmousemove=(i=>{e=document.getElementById("resize-lines-max"),i.screenX!=t&&(i.screenX>t?parseFloat(e.style.width)<10&&(e.style.width=`${parseFloat(e.style.width)+.2}vw`,document.getElementById("min-max-lines").innerHTML=`min-${settings.ciline.minLineOpac} max-${(parseFloat(e.style.width)/10).toFixed(1)}`,settings.ciline.maxLineOpac=parseFloat((parseFloat(e.style.width)/10).toFixed(1))):parseFloat(e.style.width)>0&&(e.style.width=`${parseFloat(e.style.width)-.2}vw`,document.getElementById("min-max-lines").innerHTML=`min-${settings.ciline.minLineOpac} max-${(parseFloat(e.style.width)/10).toFixed(1)}`,settings.ciline.maxLineOpac=parseFloat((parseFloat(e.style.width)/10).toFixed(1)))),t=i.screenX});break}if("group-resize-particles-min"==e.target.className&&!this.resizeParticles){this.resizeParticles=!this.resizeParticles;let e,t=0;s.onmousemove=(i=>{e=document.getElementById("resize-particles-min"),i.screenX!=t&&(i.screenX>t?parseFloat(e.style.width)<10&&(e.style.width=`${parseFloat(e.style.width)+.2}vw`,document.getElementById("min-max-particles").innerHTML=`min-${(parseFloat(e.style.width)/10).toFixed(1)} max-${settings.ciline.maxCircleOpac}`,settings.ciline.minCircleOpac=parseFloat((parseFloat(e.style.width)/10).toFixed(2))):parseFloat(e.style.width)>0&&(e.style.width=`${parseFloat(e.style.width)-.2}vw`,document.getElementById("min-max-particles").innerHTML=`min-${(parseFloat(e.style.width)/10).toFixed(1)} max-${settings.ciline.maxCircleOpac}`,settings.ciline.minCircleOpacc=parseFloat((parseFloat(e.style.width)/10).toFixed(2)))),t=i.screenX});break}if("group-resize-particles-max"==e.target.className&&!this.resizeParticles_){this.resizeParticles_=!this.resizeParticles_;let e,t=0;n.onmousemove=(i=>{e=document.getElementById("resize-particles-max"),i.screenX!=t&&(i.screenX>t?parseFloat(e.style.width)<10&&(e.style.width=`${parseFloat(e.style.width)+.2}vw`,document.getElementById("min-max-particles").innerHTML=`min-${settings.ciline.minCircleOpac} max-${(parseFloat(e.style.width)/10).toFixed(1)}`,settings.ciline.maxCircleOpac=parseFloat((parseFloat(e.style.width)/10).toFixed(1))):parseFloat(e.style.width)>0&&(e.style.width=`${parseFloat(e.style.width)-.2}vw`,document.getElementById("min-max-particles").innerHTML=`min-${settings.ciline.minCircleOpac} max-${(parseFloat(e.style.width)/10).toFixed(1)}`,settings.ciline.maxCircleOpac=parseFloat((parseFloat(e.style.width)/10).toFixed(1)))),t=i.screenX});break}}}status(){const e=[];let t,i=document.createElement("p");i.id="fps";let s=this.panels[0].appendChild(i);!function i(){requestAnimationFrame(()=>{const n=performance.now();for(;e.length>0&&e[0]<=n-1e3;)e.shift();e.push(n),t=e.length,s.innerHTML=`FPS-${t}`,i()})}()}checkChange(){`rgb(${document.getElementById("BG").style.backgroundImage.match(/\d+/g)[0]},${document.getElementById("BG").style.backgroundImage.match(/\d+/g)[1]},${document.getElementById("BG").style.backgroundImage.match(/\d+/g)[2]})`!=settings.background&&(settings.background=`rgb(${document.getElementById("BG").style.backgroundImage.match(/\d+/g)[0]},${document.getElementById("BG").style.backgroundImage.match(/\d+/g)[1]},${document.getElementById("BG").style.backgroundImage.match(/\d+/g)[2]})`),`rgba(${document.getElementById("color-lines").style.backgroundImage.match(/\d+/g)[0]},${document.getElementById("color-lines").style.backgroundImage.match(/\d+/g)[1]},${document.getElementById("color-lines").style.backgroundImage.match(/\d+/g)[2]},`!=settings.ciline.linesColor&&(settings.ciline.linesColor=`rgba(${document.getElementById("color-lines").style.backgroundImage.match(/\d+/g)[0]},${document.getElementById("color-lines").style.backgroundImage.match(/\d+/g)[1]},${document.getElementById("color-lines").style.backgroundImage.match(/\d+/g)[2]},`),`rgba(${document.getElementById("color-particles").style.backgroundImage.match(/\d+/g)[0]},${document.getElementById("color-particles").style.backgroundImage.match(/\d+/g)[1]},${document.getElementById("color-particles").style.backgroundImage.match(/\d+/g)[2]},`!=settings.ciline.particlesColor&&(settings.ciline.particlesColor=`rgba(${document.getElementById("color-particles").style.backgroundImage.match(/\d+/g)[0]},${document.getElementById("color-particles").style.backgroundImage.match(/\d+/g)[1]},${document.getElementById("color-particles").style.backgroundImage.match(/\d+/g)[2]},`),Math.floor(document.getElementById("count-particles").value)!=settings.ciline.count&&0!=Math.floor(document.getElementById("count-particles").value)&&(settings.ciline.count=Math.floor(document.getElementById("count-particles").value)),Math.floor(document.getElementById("speed-particles").value)!=settings.ciline.MaxVelocity&&0!=Math.floor(document.getElementById("speed-particles").value)&&(settings.ciline.MaxVelocity=Math.floor(document.getElementById("speed-particles").value)),Math.floor(document.getElementById("radius-particles").value)!=settings.ciline.radius&&0!=Math.floor(document.getElementById("radius-particles").value)&&(settings.ciline.radius=Math.floor(document.getElementById("radius-particles").value)),Math.floor(document.getElementById("width-lines").value)!=settings.ciline.widthline&&0!=Math.floor(document.getElementById("width-lines").value)&&(settings.ciline.widthline=Math.floor(document.getElementById("width-lines").value))}}addEventListener("load",()=>{(new Main).init()});